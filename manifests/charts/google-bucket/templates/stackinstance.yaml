{{- range $instance := .Values.instances }}
---
apiVersion: terraform.silvios.me/v1alpha1
kind: StackInstance
metadata:
  name: {{ $instance.name }}
spec:
  stack:
    provider: google
    backend: gcs
    image: silviosilva/google-bucket
    version: 0.3.1
    registry: docker.io
  vars:
    name: {{ $instance.name }}
    location: {{ $instance.location }}
  outputs:
    - bucket_id
{{- end }}
